# 🚀 Ta-Go 배포 시작 가이드

## 📋 사전 준비사항

### 1. 서버 접속 정보
- **서버 IP**: 72.60.40.57
- **SSH 접속**: `ssh root@72.60.40.57`
- **프로젝트 경로**: `/var/www/ta-go`

### 2. 필요한 소프트웨어
- Docker
- Docker Compose
- Git

## 🔧 배포 단계

### 1단계: 서버에 프로젝트 클론

```bash
# 서버에 SSH 접속
ssh root@72.60.40.57

# 프로젝트 디렉토리 생성
mkdir -p /var/www
cd /var/www

# GitHub에서 프로젝트 클론
git clone https://github.com/sherzod992/Ta-Go.git ta-go
cd ta-go
```

### 2단계: 환경 변수 설정

```bash
# 프로덕션 환경 변수 파일 생성
nano env.production
```

**env.production 파일 내용:**
```env
# 프로덕션 환경 변수 설정
NODE_ENV=production

# API URLs
NEXT_PUBLIC_API_URL=http://72.60.40.57:3001
NEXT_PUBLIC_API_GRAPHQL_URL=http://72.60.40.57:3001/graphql
NEXT_PUBLIC_API_WS=ws://72.60.40.57:3001

# 서버 설정
PORT=3011
HOSTNAME=0.0.0.0

# Authentication (실제 값으로 교체 필요)
NEXTAUTH_URL=http://72.60.40.57
NEXTAUTH_SECRET=your-actual-secret-key-here

# OAuth Providers (실제 값으로 교체 필요)
GOOGLE_CLIENT_ID=your-actual-google-client-id
GOOGLE_CLIENT_SECRET=your-actual-google-client-secret

FACEBOOK_CLIENT_ID=your-actual-facebook-client-id
FACEBOOK_CLIENT_SECRET=your-actual-facebook-client-secret

GITHUB_CLIENT_ID=your-actual-github-client-id
GITHUB_CLIENT_SECRET=your-actual-github-client-secret

KAKAO_CLIENT_ID=your-actual-kakao-client-id
KAKAO_CLIENT_SECRET=your-actual-kakao-client-secret
```

### 3단계: Docker 빌드 및 배포

```bash
# 배포 스크립트 실행 권한 부여
chmod +x deploy.sh quick-deploy.sh deploy-production.sh

# 프로덕션 배포 실행
./deploy-production.sh
```

### 4단계: 배포 확인

```bash
# 컨테이너 상태 확인
docker-compose ps

# 로그 확인
docker-compose logs -f

# 헬스체크
curl http://localhost:3000/health
```

## 🌐 접속 URL

배포 완료 후 다음 URL로 접속 가능:

- **프론트엔드**: http://72.60.40.57:3011
- **백엔드 API**: http://72.60.40.57:3001
- **GraphQL**: http://72.60.40.57:3001/graphql
- **헬스체크**: http://72.60.40.57:3001/health

## 🔧 문제 해결

### 포트 충돌 시
```bash
# 포트 사용 확인
netstat -tlnp | grep :3001
netstat -tlnp | grep :3011

# 기존 프로세스 종료
sudo lsof -ti:3001 | xargs kill -9
sudo lsof -ti:3011 | xargs kill -9
```

### 컨테이너 재시작
```bash
# 모든 컨테이너 재시작
docker-compose restart

# 특정 컨테이너 재시작
docker-compose restart ta-go-frontend
```

### 로그 확인
```bash
# 실시간 로그
docker-compose logs -f

# 특정 서비스 로그
docker-compose logs -f ta-go-frontend
docker-compose logs -f ta-go-backend
```

## 📞 추가 지원

문제가 발생하면 다음을 확인하세요:

1. **Docker 상태**: `docker info`
2. **컨테이너 상태**: `docker-compose ps`
3. **로그 확인**: `docker-compose logs -f`
4. **네트워크 연결**: `ping 72.60.40.57`

---

**마지막 업데이트**: 2024년 12월
**버전**: 1.0.0
